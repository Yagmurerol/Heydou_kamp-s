@model hey.dou.Models.AiDanismanViewModel
@{
    ViewData["Title"] = "AI Danışman";
}

<div class="max-w-3xl mx-auto bg-card-light dark:bg-card-dark rounded-2xl shadow-xl p-6 md:p-8 border border-slate-100 dark:border-slate-700">
    <div class="flex items-center gap-3 mb-6">
        <div class="h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center">
            <span class="material-symbols-rounded text-3xl text-primary">smart_toy</span>
        </div>
        <div>
            <h1 class="text-2xl md:text-3xl font-extrabold text-gray-900 dark:text-white">
                HeyDOU AI Danışman
            </h1>
            <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                Akademik takvim, yemekhane, kulüp etkinlikleri ve staj hakkında soru sorabilirsin.
            </p>
        </div>
    </div>

    @if (!string.IsNullOrEmpty(Model.Error))
    {
        <div class="mb-4 rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700">
            @Model.Error
        </div>
    }

    <form asp-action="Index" method="post" class="space-y-4">
        @Html.AntiForgeryToken()

        <div>
            <label asp-for="Question" class="block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1">
                Sorun
            </label>
            <textarea asp-for="Question" rows="4"
                      class="mt-1 block w-full rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/70 px-3 py-2 text-sm text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-primary/60 focus:border-primary"
                      placeholder="Örneğin: Bahar dönemi final haftası ne zaman başlıyor?"></textarea>
        </div>

        <div class="flex justify-end">
            <button type="submit"
                    class="inline-flex items-center justify-center rounded-xl bg-primary px-5 py-2.5 text-sm font-semibold text-white shadow-md hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary/60 focus:ring-offset-2">
                <span class="material-symbols-rounded text-base mr-2">send</span>
                Soruyu Gönder
            </button>
        </div>
    </form>

    @if (!string.IsNullOrEmpty(Model.Answer))
    {
        <div class="mt-6 border-t border-gray-200 dark:border-gray-700 pt-4 space-y-4">
            <div>
                <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-2 flex items-center gap-2">
                    <span class="material-symbols-rounded text-base text-primary">chat</span>
                    AI Danışman Cevabı
                </h2>
                <div class="rounded-xl bg-gray-50 dark:bg-gray-800/70 px-4 py-3 text-sm text-gray-800 dark:text-gray-100 whitespace-pre-wrap">
                    @Model.Answer
                </div>
            </div>

            <div class="border-t border-gray-200 dark:border-gray-700 pt-3">
                <p class="text-xs uppercase tracking-wide text-gray-400 mb-2">İlgili sayfalar</p>
                <div class="flex flex-wrap gap-2 text-sm">
                    <a asp-controller="AkademikTakvim" asp-action="Index"
                       class="inline-flex items-center rounded-full border border-gray-200 dark:border-gray-700 px-3 py-1 hover:bg-gray-100 dark:hover:bg-gray-800">
                        <span class="material-symbols-rounded text-xs mr-1">calendar_month</span>
                        Akademik Takvim
                    </a>
                    <a asp-controller="Yemekhane" asp-action="Index"
                       class="inline-flex items-center rounded-full border border-gray-200 dark:border-gray-700 px-3 py-1 hover:bg-gray-100 dark:hover:bg-gray-800">
                        <span class="material-symbols-rounded text-xs mr-1">restaurant_menu</span>
                        Yemekhane
                    </a>
                    <a asp-controller="Anket" asp-action="Index"
                       class="inline-flex items-center rounded-full border border-gray-200 dark:border-gray-700 px-3 py-1 hover:bg-gray-100 dark:hover:bg-gray-800">
                        <span class="material-symbols-rounded text-xs mr-1">poll</span>
                        Anketler
                    </a>
                    <a asp-controller="Etkinlik" asp-action="Index"
                       class="inline-flex items-center rounded-full border border-gray-200 dark:border-gray-700 px-3 py-1 hover:bg-gray-100 dark:hover:bg-gray-800">
                        <span class="material-symbols-rounded text-xs mr-1">event</span>
                        Etkinlikler
                    </a>
                </div>
            </div>
        </div>
    }
</div>
